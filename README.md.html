<!DOCTYPE html>
<html>
<head>
    <title>Node http server with https and proxy support</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport"
        content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
    
    <link rel="stylesheet"
        media="all"
        href="assets/file_1.css"/>
    
    <link rel="stylesheet"
        media="all"
        href="assets/file_5.css"/>
    
    <link rel="stylesheet"
        media="all"
        href="assets/32px.png"/>
    
    <link rel="stylesheet"
        media="all"
        href="assets/40px.png"/>
    
    <link rel="stylesheet"
        media="all"
        href="assets/throbber.gif"/>
    
    <link rel="stylesheet"
        media="all"
        href="assets/file_7.css"/>
    
    <link rel="stylesheet"
        media="all"
        href="assets/file_8.css"/>
    

    
    <script src="assets/file_2.js"
        type="text/javascript"></script>
    
    <script src="assets/file_3.js"
        type="text/javascript"></script>
    
    <script src="assets/file_4.js"
        type="text/javascript"></script>
    
    <script src="assets/file_6.js"
        type="text/javascript"></script>
    

    <script type="application/json" id="jsTreeJSON">
        [{"id":"./example/basic/https-advancedApp.js","text":"https-advancedApp.js","icon":"jstree-file","parent":"./example/basic","a_attr":{"href":"example/basic/https-advancedApp.js.html"},"state":{"selected":false}},{"id":".","text":".","icon":"jstree-folder","parent":"#","a_attr":{"href":"."},"state":{"opened":true}},{"id":"./example","text":"example","icon":"jstree-folder","parent":".","a_attr":{"href":"example"},"state":{"opened":false}},{"id":"./example/advanced","text":"advanced","icon":"jstree-folder","parent":"./example","a_attr":{"href":"example/advanced"},"state":{"opened":false}},{"id":"./example/advanced/basicTemplate.js","text":"basicTemplate.js","icon":"jstree-file","parent":"./example/advanced","a_attr":{"href":"example/advanced/basicTemplate.js.html"},"state":{"selected":false}},{"id":"./example/advanced/https-ONLY-basicTemplate.js","text":"https-ONLY-basicTemplate.js","icon":"jstree-file","parent":"./example/advanced","a_attr":{"href":"example/advanced/https-ONLY-basicTemplate.js.html"},"state":{"selected":false}},{"id":"./example/advanced/https-basicTemplate.js","text":"https-basicTemplate.js","icon":"jstree-file","parent":"./example/advanced","a_attr":{"href":"example/advanced/https-basicTemplate.js.html"},"state":{"selected":false}},{"id":"./example/advanced/https-randomCSS.js","text":"https-randomCSS.js","icon":"jstree-file","parent":"./example/advanced","a_attr":{"href":"example/advanced/https-randomCSS.js.html"},"state":{"selected":false}},{"id":"./example/advanced/https-requestBenchmark.js","text":"https-requestBenchmark.js","icon":"jstree-file","parent":"./example/advanced","a_attr":{"href":"example/advanced/https-requestBenchmark.js.html"},"state":{"selected":false}},{"id":"./example/advanced/randomCSS.js","text":"randomCSS.js","icon":"jstree-file","parent":"./example/advanced","a_attr":{"href":"example/advanced/randomCSS.js.html"},"state":{"selected":false}},{"id":"./example/advanced/requestBenchmark.js","text":"requestBenchmark.js","icon":"jstree-file","parent":"./example/advanced","a_attr":{"href":"example/advanced/requestBenchmark.js.html"},"state":{"selected":false}},{"id":"./example/basic","text":"basic","icon":"jstree-folder","parent":"./example","a_attr":{"href":"example/basic"},"state":{"opened":false}},{"id":"./example/basic/advancedApp.js","text":"advancedApp.js","icon":"jstree-file","parent":"./example/basic","a_attr":{"href":"example/basic/advancedApp.js.html"},"state":{"selected":false}},{"id":"./example/basic/basicApp.js","text":"basicApp.js","icon":"jstree-file","parent":"./example/basic","a_attr":{"href":"example/basic/basicApp.js.html"},"state":{"selected":false}},{"id":"./example/basic/basicLogging.js","text":"basicLogging.js","icon":"jstree-file","parent":"./example/basic","a_attr":{"href":"example/basic/basicLogging.js.html"},"state":{"selected":false}},{"id":"./example/basic/https-ONLY-basicApp.js","text":"https-ONLY-basicApp.js","icon":"jstree-file","parent":"./example/basic","a_attr":{"href":"example/basic/https-ONLY-basicApp.js.html"},"state":{"selected":false}},{"id":"./README.md","text":"README.md","icon":"jstree-file","parent":".","a_attr":{"href":"README.md.html"},"state":{"selected":true}},{"id":"./example/basic/https-basicApp.js","text":"https-basicApp.js","icon":"jstree-file","parent":"./example/basic","a_attr":{"href":"example/basic/https-basicApp.js.html"},"state":{"selected":false}},{"id":"./example/basic/https-basicLogging.js","text":"https-basicLogging.js","icon":"jstree-file","parent":"./example/basic","a_attr":{"href":"example/basic/https-basicLogging.js.html"},"state":{"selected":false}},{"id":"./example/basic/https-multipleDomains.js","text":"https-multipleDomains.js","icon":"jstree-file","parent":"./example/basic","a_attr":{"href":"example/basic/https-multipleDomains.js.html"},"state":{"selected":false}},{"id":"./example/basic/https-verboseApp.js","text":"https-verboseApp.js","icon":"jstree-file","parent":"./example/basic","a_attr":{"href":"example/basic/https-verboseApp.js.html"},"state":{"selected":false}},{"id":"./example/basic/multipleDomains.js","text":"multipleDomains.js","icon":"jstree-file","parent":"./example/basic","a_attr":{"href":"example/basic/multipleDomains.js.html"},"state":{"selected":false}},{"id":"./example/basic/verboseApp.js","text":"verboseApp.js","icon":"jstree-file","parent":"./example/basic","a_attr":{"href":"example/basic/verboseApp.js.html"},"state":{"selected":false}},{"id":"./example/proxy","text":"proxy","icon":"jstree-folder","parent":"./example","a_attr":{"href":"example/proxy"},"state":{"opened":false}},{"id":"./example/proxy/basic.js","text":"basic.js","icon":"jstree-file","parent":"./example/proxy","a_attr":{"href":"example/proxy/basic.js.html"},"state":{"selected":false}},{"id":"./example/proxy/https-and-http-basic.js","text":"https-and-http-basic.js","icon":"jstree-file","parent":"./example/proxy","a_attr":{"href":"example/proxy/https-and-http-basic.js.html"},"state":{"selected":false}},{"id":"./example/proxy/https-and-http-google-proxy.js","text":"https-and-http-google-proxy.js","icon":"jstree-file","parent":"./example/proxy","a_attr":{"href":"example/proxy/https-and-http-google-proxy.js.html"},"state":{"selected":false}},{"id":"./server","text":"server","icon":"jstree-folder","parent":".","a_attr":{"href":"server"},"state":{"opened":false}},{"id":"./server/Config.js","text":"Config.js","icon":"jstree-file","parent":"./server","a_attr":{"href":"server/Config.js.html"},"state":{"selected":false}},{"id":"./server/http.js","text":"http.js","icon":"jstree-file","parent":"./server","a_attr":{"href":"server/http.js.html"},"state":{"selected":false}},{"id":"./bin","text":"bin","icon":"jstree-folder","parent":".","a_attr":{"href":"bin"},"state":{"opened":false}},{"id":"./bin/nodeserver.js","text":"nodeserver.js","icon":"jstree-file","parent":"./bin","a_attr":{"href":"bin/nodeserver.js.html"},"state":{"selected":false}}]
    </script>
</head>
<body class="markdown-body">
<h1>
    Node http server with https and proxy support
</h1>
<div class="subHeading">
    ./README.md
</div>
<button type="button" class="navigatorToggle">&#9776; files...</button>
<nav class="navigationTree minimized">
    <input type="text" id="jsTreeSearch" placeholder="search..."/>
    <div></div>
</nav>
<section>
    <ul class="sectionDetails docsOnly">
        
        
        <li id="section-1">
            <div class="annotation">
                
<hr>
<p>Simple to use stand alone node HTTP and HTTPS Server you can spin up in seconds.</p>
<p>Support for building proxy servers has been added. Documentation coming in next release. <a href="https://github.com/RIAEvangelist/node-http-server/tree/master/example/proxy">For now see the node-http-server proxy examples</a>.</p>
<p><code>npm i node-http-server</code></p>
<p><a href="https://www.npmjs.com/package/node-http-server"><img src="https://nodei.co/npm/node-http-server.png?downloads=true&amp;downloadRank=true&amp;stars=true" alt="node-http-server stats"></a>  </p>
<p>npm info :  <a href="http://npm-stat.com/charts.html?package=node-http-server&amp;author=&amp;from=&amp;to=">See npm trends and stats for node-http-server</a><br><img src="https://img.shields.io/npm/v/node-http-server.svg" alt="node-http-server npm version"> <img src="https://img.shields.io/node/v/node-http-server.svg" alt="supported node version for node-http-server"> <img src="https://img.shields.io/npm/dt/node-http-server.svg" alt="total npm downloads for node-http-server"> <img src="https://img.shields.io/npm/dm/node-http-server.svg" alt="monthly npm downloads for node-http-server"> <img src="https://img.shields.io/npm/l/node-http-server.svg" alt="npm licence for node-http-server"></p>
<p>GitHub info :<br><img src="https://img.shields.io/github/release/RIAEvangelist/node-http-server.svg" alt="node-http-server GitHub Release"> <img src="https://img.shields.io/github/license/RIAEvangelist/node-http-server.svg" alt="GitHub license node-http-server license"> <img src="https://img.shields.io/github/issues/RIAEvangelist/node-http-server.svg" alt="open issues for node-http-server on GitHub"></p>
<p>Package Quality :<br><img src="http://npm.packagequality.com/badge/node-http-server.png" alt="node-http-server Package Quality"></p>
<h2 id="cli-use-if-you-just-want-to-test">cli use if you just want to test</h2>
<p>Now you can also use the nodeserver cli if you just want to spin up a basic file server to test something out quickly or share on the local network.</p>
<pre><code class="lang-sh">
$ sudo npm i -g node-http-server

//start a nodeserver from the current directory on the default port 8080
$ nodeserver
</code></pre>
<p>You can modify any of the config keys by passing their key value pairs as args.</p>
<pre><code class="lang-sh">
//start a verbose nodeserver from the current directory on port 1942
$ nodeserver port=1942 verbose=<span class="hljs-literal">true</span>
</code></pre>
<h2 id="writing-a-node-http-or-https-server">writing a node http or https server</h2>
<p>The below table shows all of the methods available on the server when you require this module.</p>
<pre><code class="lang-javascript">
    <span class="hljs-keyword">const</span> server=<span class="hljs-built_in">require</span>(<span class="hljs-string">'node-http-server'</span>);

    server.deploy();
</code></pre>
<p>If you want to create a custom Server or extend the Server Class you can require just the server class.</p>
<pre><code class="lang-javascript">
    <span class="hljs-keyword">const</span> Server=<span class="hljs-built_in">require</span>(<span class="hljs-string">'node-http-server'</span>).Server;

    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyCustomServer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Server</span></span>{
      <span class="hljs-keyword">constructor</span>(){
        <span class="hljs-keyword">super</span>();
      }
    }

    <span class="hljs-keyword">const</span> server=<span class="hljs-keyword">new</span> MyCustomServer;
    server.deploy();
</code></pre>
<table>
<thead>
<tr>
<th>Server Method</th>
<th>params</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>deploy</td>
<td>config obj (optional), readyCallback fn (optional)</td>
<td>Starts the server. if a config object is passed it will shallow merge it with a clean instantion of the Config class.</td>
</tr>
<tr>
<td>onRequest</td>
<td>request obj, response obj, serve fn</td>
<td>Called when request received. If this function manually serves or requires manual async serving, it should return true and use the <code>serve</code> argument to manually serve the response.</td>
</tr>
<tr>
<td>beforeServe</td>
<td>request obj, response obj, body obj, encoding obj, serve fn</td>
<td>Called just before data is served to the client. If this function manually serves or requires manual async serving, it should return true and use the <code>serve</code> argument to manually serve the response.</td>
</tr>
<tr>
<td>afterServe</td>
<td>request obj</td>
<td>Called once data has been fully sent to client.</td>
</tr>
<tr>
<td>Config</td>
<td>config object (optional)</td>
<td>This is a reference to the Default Config class. Use it to generate a complete config file based off of the default values and arguments passed in when launching the app. Will perform a shallow merge of default values and passed values if a config object passed.</td>
</tr>
<tr>
<td>Server</td>
<td>none</td>
<td>This is a reference to the Server Class. Use it to start multiple servers on different ports or to extend the node-http-server.</td>
</tr>
</tbody>
</table>
<p>|function | parameters | description |
|serve    | request obj, response obj, body str, encoding str | serves the response with the specified body and encoding for the given request |</p>
<hr>
<h2 id="examples">Examples</h2>
<p>To see the node http server in action run <code>npm start</code> from the root of this repo and then visit <a href="http://localhost:8000">localhost:8000</a>.</p>
<p>To start only an https example server <code>npm run https</code> from the root of this repo and then visit <a href="http://localhost:4433">localhost:4433</a>.</p>
<p>To spin up both an http and an https server <code>npm run both</code> from the root of this repo and then visit <a href="http://localhost:4433">localhost:4433</a> or <a href="http://localhost:8000">localhost:8000</a>.</p>
<p>Detailed examples can be found in the <a href="https://github.com/RIAEvangelist/node-http-server/tree/master/example">example folder</a> The basic example directory is static http and https file servers and the advanced directory has dynamic server side rendering http and https examples including a benchmark example.</p>
<h1 id="basic-http-server-example">Basic http server example</h1>
<pre><code class="lang-javascript">
    <span class="hljs-keyword">const</span> server=<span class="hljs-built_in">require</span>(<span class="hljs-string">'node-http-server'</span>);

    server.deploy(
        {
            <span class="hljs-attr">port</span>:<span class="hljs-number">8000</span>,
            <span class="hljs-attr">root</span>:<span class="hljs-string">'~/myApp/'</span>
        }
    );
</code></pre>
<h1 id="basic-https-only-server-example">Basic https only server example</h1>
<pre><code class="lang-javascript">
    <span class="hljs-keyword">const</span> server=<span class="hljs-built_in">require</span>(<span class="hljs-string">'node-http-server'</span>);

    server.deploy(
        {
            <span class="hljs-attr">port</span>:<span class="hljs-number">8000</span>,
            <span class="hljs-attr">root</span>:<span class="hljs-string">'~/myApp/'</span>,
            <span class="hljs-attr">https</span>:{
                <span class="hljs-attr">privateKey</span>:<span class="hljs-string">`/path/to/your/certs/private/server.key`</span>,
                <span class="hljs-attr">certificate</span>:<span class="hljs-string">`/path/to/your/certs/server.pub`</span>,
                <span class="hljs-attr">port</span>:<span class="hljs-number">4433</span>,
                <span class="hljs-attr">only</span>:<span class="hljs-literal">true</span>
            }
        }
    );
</code></pre>
<h1 id="basic-server-running-both-http-and-https">Basic server running both http and https</h1>
<pre><code class="lang-javascript">
    <span class="hljs-keyword">const</span> server=<span class="hljs-built_in">require</span>(<span class="hljs-string">'node-http-server'</span>);

    server.deploy(
        {
            <span class="hljs-attr">port</span>:<span class="hljs-number">8000</span>,
            <span class="hljs-attr">root</span>:<span class="hljs-string">'~/myApp/'</span>,
            <span class="hljs-attr">https</span>:{
                <span class="hljs-attr">privateKey</span>:<span class="hljs-string">`/path/to/your/certs/private/server.key`</span>,
                <span class="hljs-attr">certificate</span>:<span class="hljs-string">`/path/to/your/certs/server.pub`</span>,
                <span class="hljs-attr">port</span>:<span class="hljs-number">4433</span>
            }
        }
    );
</code></pre>
<hr>
<h2 id="custom-configuration">Custom configuration</h2>
<p>for http :</p>
<pre><code class="lang-javascript">
    <span class="hljs-keyword">const</span> server=<span class="hljs-built_in">require</span>(<span class="hljs-string">'node-http-server'</span>);

    <span class="hljs-keyword">const</span> config=<span class="hljs-keyword">new</span> server.Config;
    config.errors[<span class="hljs-string">'404'</span>]    = <span class="hljs-string">'These are not the files you are looking for...'</span>;
    config.contentType.mp4  = <span class="hljs-string">'video/mp4'</span>;
    config.port             = <span class="hljs-number">8005</span>;
    config.verbose          = <span class="hljs-literal">true</span>;
    config.root             = <span class="hljs-string">'~/myApp/'</span>

    server.deploy(config);
</code></pre>
<p>for https :</p>
<pre><code class="lang-javascript">
    <span class="hljs-keyword">const</span> server=<span class="hljs-built_in">require</span>(<span class="hljs-string">'node-http-server'</span>);

    <span class="hljs-keyword">const</span> config=<span class="hljs-keyword">new</span> server.Config;
    config.errors[<span class="hljs-string">'404'</span>]    = <span class="hljs-string">'These are not the files you are looking for...'</span>;
    config.contentType.mp4  = <span class="hljs-string">'video/mp4'</span>;
    config.port             = <span class="hljs-number">8005</span>;
    config.verbose          = <span class="hljs-literal">true</span>;
    config.root             = <span class="hljs-string">'~/myApp/'</span>
    config.https.privateKey = <span class="hljs-string">`/path/to/your/certs/private/server.key`</span>;
    config.https.certificate= <span class="hljs-string">`/path/to/your/certs/server.pub`</span>;
    config.https.port       = <span class="hljs-number">4433</span>;
    config.https.only       = <span class="hljs-literal">true</span>;

    server.deploy(config);
</code></pre>
<hr>
<h2 id="multiple-domains-or-subdomains">Multiple domains or subdomains</h2>
<pre><code class="lang-javascript">
    <span class="hljs-keyword">const</span> server=<span class="hljs-built_in">require</span>(<span class="hljs-string">'node-http-server'</span>);

    <span class="hljs-keyword">const</span> config={
        <span class="hljs-attr">port</span>:<span class="hljs-number">8010</span>,
        <span class="hljs-attr">root</span>:__dirname + <span class="hljs-string">'/www/myApp/'</span>,
        <span class="hljs-attr">domain</span>:<span class="hljs-string">'myapp.com'</span>,
        <span class="hljs-attr">domains</span>:{
            <span class="hljs-string">'a.myapp.com'</span>:__dirname+<span class="hljs-string">'/www/a-myApp/'</span>,
            <span class="hljs-string">'yourapp.com'</span>:__dirname+<span class="hljs-string">'/someFolder/yourApp/'</span>
        }
    }

    server.deploy(config);
</code></pre>
<h2 id="template-filling">Template filling</h2>
<pre><code class="lang-javascript">
    <span class="hljs-keyword">const</span> server=<span class="hljs-built_in">require</span>(<span class="hljs-string">'../../server/http.js'</span>);

    server.beforeServe=beforeServe;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">beforeServe</span>(<span class="hljs-params">request,response,body,encoding</span>)</span>{
        <span class="hljs-comment">//only parsing html files for this example</span>
        <span class="hljs-keyword">if</span>(response.getHeader(<span class="hljs-string">'Content-Type'</span>)!=server.config.contentType.html){
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">const</span> someVariable=<span class="hljs-string">'this is some variable value'</span>;

        body.value=body.value.replace(<span class="hljs-string">'{{someVariable}}'</span>,someVariable);
    }

    server.deploy(
        {
            <span class="hljs-attr">port</span>:<span class="hljs-number">8000</span>,
            <span class="hljs-attr">root</span>:<span class="hljs-string">`<span class="hljs-subst">${__dirname}</span>/appRoot/`</span>
        }
    );
</code></pre>
<h2 id="default-node-http-server-configuration">Default Node HTTP Server Configuration</h2>
<pre><code class="lang-javascript">
    {
        <span class="hljs-attr">verbose</span>     : (args.verbose==<span class="hljs-string">'true'</span>)||<span class="hljs-literal">false</span>,
        <span class="hljs-attr">port</span>        : args.port||defaults.port,
        <span class="hljs-attr">root</span>        : args.root||defaults.root,
        <span class="hljs-attr">domain</span>      : args.domain||defaults.domain,
        <span class="hljs-attr">https</span>       :{
            <span class="hljs-attr">ca</span>:<span class="hljs-string">''</span>,
            <span class="hljs-attr">privateKey</span>:<span class="hljs-string">''</span>,
            <span class="hljs-attr">certificate</span>:<span class="hljs-string">''</span>,
            <span class="hljs-attr">port</span>:<span class="hljs-number">443</span>,
            <span class="hljs-attr">only</span>:<span class="hljs-literal">false</span>
        },
        <span class="hljs-attr">log</span>         : <span class="hljs-literal">false</span>,
        <span class="hljs-attr">logFunction</span> : serverLogging,
        <span class="hljs-attr">domains</span>   : {
            <span class="hljs-comment">/*******************\
             * domain  : /that/domains/root/dir
             *
             * for sub domains, specify the whole host i.e. "my.sub.domain"
             * you may need to edit your hosts file, cnames or iptable
             * domain or my.domain etc. goes to 127.0.0.1 for local development
             * *****************/</span>
        },
        <span class="hljs-attr">server</span>      : {
            <span class="hljs-attr">index</span>   : args.index||defaults.index,
            <span class="hljs-attr">noCache</span> : args.noCache==<span class="hljs-string">'false'</span> ? <span class="hljs-literal">false</span> : <span class="hljs-literal">true</span>,
            <span class="hljs-attr">timeout</span> : <span class="hljs-number">30000</span> <span class="hljs-comment">//30 second timeout</span>
        },
        <span class="hljs-attr">contentType</span> : {
            <span class="hljs-attr">html</span>    : <span class="hljs-string">'text/html'</span>,
            <span class="hljs-attr">css</span>     : <span class="hljs-string">'text/css'</span>,
            <span class="hljs-attr">js</span>      : <span class="hljs-string">'text/javascript'</span>,
            <span class="hljs-attr">json</span>    : <span class="hljs-string">'application/json'</span>,
            <span class="hljs-attr">txt</span>     : <span class="hljs-string">'text/plain'</span>,
            <span class="hljs-attr">jpeg</span>    : <span class="hljs-string">'image/jpeg'</span>,
            <span class="hljs-attr">jpg</span>     : <span class="hljs-string">'image/jpeg'</span>,
            <span class="hljs-attr">png</span>     : <span class="hljs-string">'image/png'</span>,
            <span class="hljs-attr">gif</span>     : <span class="hljs-string">'image/gif'</span>,
            <span class="hljs-attr">ico</span>     : <span class="hljs-string">'image/x-icon'</span>,
            <span class="hljs-attr">appcache</span>: <span class="hljs-string">'text/cache-manifest'</span>
        },
        <span class="hljs-attr">restrictedType</span>: {

        },
        <span class="hljs-attr">errors</span>:{
            <span class="hljs-attr">headers</span> : {
                <span class="hljs-string">'Content-Type'</span> : <span class="hljs-string">'text/plain'</span>
            },
            <span class="hljs-number">404</span>: <span class="hljs-string">'404 MIA'</span>,
            <span class="hljs-number">415</span>: <span class="hljs-string">'415 File type not supported'</span>,
            <span class="hljs-number">403</span>: <span class="hljs-string">'403 Access Denied'</span>,
            <span class="hljs-number">500</span>: <span class="hljs-string">'500 {{err}}'</span>
        }
    };
</code></pre>
<table>
<thead>
<tr>
<th>key</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>verbose</td>
<td>display detailed info about what server is doing via terminal.</td>
</tr>
<tr>
<td>port</td>
<td>the port on which the server should run</td>
</tr>
<tr>
<td>root</td>
<td>the absolute path to the root dir for the domain</td>
</tr>
<tr>
<td>domain</td>
<td>the server domain. To accept incoming requests for <strong><em>ANY Applicable Domain</em></strong> use <code>0.0.0.0</code> this will allow any request that is pointed at this machine on the specified port to use this server config.</td>
</tr>
<tr>
<td>https</td>
<td>settings for https, these wil only take effect if both a <code>privateKey</code> and a <code>certificate</code> are specified. Setting <code>only</code> to be true means the instance will only serve over https</td>
</tr>
<tr>
<td>https.privateKey</td>
<td>path to your servers private key like ./local-certs/private/server.key or similar</td>
</tr>
<tr>
<td>https.certificate</td>
<td>path to your servers public cert like ./local-certs/client.pub or similar</td>
</tr>
<tr>
<td>https.ca</td>
<td>path to your officially signed CA’s certificate authority file servers public cert like ./local-certs/ca-bundle.crt or similar. This is often needed for officially signed and generated certs, but not for self signed certs so it is optional.</td>
</tr>
<tr>
<td>log</td>
<td>full path to log file, if specified and the file is not present, it will be created, however the dir must be there. Example path : <code>/tmp/server.log</code> It is recommended that you timestamp this file name with a time stamp like : <code>&#39;~/serverLogs/domain-&#39;+new Date().getTime()+&#39;.log&#39;</code> this will create a new log file each time the server is started/restarted/reboot etc…</td>
</tr>
<tr>
<td>logFunction</td>
<td>the default function appends timestamps to the headers object and logs as JSON in the <code>log</code> file. You can assign your own function here as well. It should accepts a javascript Object as the first argument.</td>
</tr>
<tr>
<td>domains.*</td>
<td>this is a mapping of hostname to path. It can be used for multiple different domains, or for subdomains.</td>
</tr>
<tr>
<td>server.index</td>
<td>the default file to look for in a dir. if not found a <strong>404</strong> will be displayed</td>
</tr>
<tr>
<td>server.noCache</td>
<td>should the server prevent caching</td>
</tr>
<tr>
<td>server.timeout</td>
<td>the amount of time allowed for no activity on a connection before it is closed.</td>
</tr>
<tr>
<td>contentType.*</td>
<td>mapping of file extension to header Content-Type value.</td>
</tr>
<tr>
<td>restrictedType.*</td>
<td>extensions to which access will be denied.</td>
</tr>
<tr>
<td>errors.headers</td>
<td>these are the headers that will automatically be applied to all error responses. You can add custom headers per error in the <code>beforeServe</code> function</td>
</tr>
<tr>
<td>errors.*</td>
<td>error headers and error strings, these can be anything you like from html to text etc. The <strong>500</strong> error will replace <code>{{err}}</code> in the specified value with the actual error message from the server.</td>
</tr>
</tbody>
</table>
<h4 id="config-domains-">config.domains.*</h4>
<p>Use this object for sub domains, or hosting multiple domains on the same port. Specify the whole host i.e. “my.sub.domain.com” or “amazing-domain.com”.</p>
<p>You may need to edit your hosts file, cnames, iptable to get this to work on your server or development environment.</p>
<p>You can add the below example to your hosts file to run some of the examples from the <code>/example/basic</code> directory which use multiple domains on occasion.</p>
<pre><code><span class="hljs-section">#node-http-server examples</span>
127.0.0.1 myapp
127.0.0.1 a.myapp
127.0.0.1 yourapp.com
</code></pre><pre><code class="lang-javascript">
    <span class="hljs-keyword">const</span> server=<span class="hljs-built_in">require</span>(<span class="hljs-string">'node-http-server'</span>);

    <span class="hljs-keyword">const</span> config={
        <span class="hljs-attr">port</span>:<span class="hljs-number">8000</span>,
        <span class="hljs-attr">root</span>:__dirna\me+<span class="hljs-string">'/appRoot/'</span>,
        <span class="hljs-attr">domain</span>:<span class="hljs-string">'myapp'</span>,
        <span class="hljs-attr">domains</span>:{
             <span class="hljs-comment">//subdomain</span>
             <span class="hljs-string">'a.myapp'</span>:<span class="hljs-string">`<span class="hljs-subst">${__dirname}</span>/appSubDomainRoot/`</span>,
             <span class="hljs-comment">//totally different domain, but also on port 8000</span>
             <span class="hljs-string">'yourapp.com'</span>:<span class="hljs-string">`<span class="hljs-subst">${__dirname}</span>/appOtherDomainRoot/`</span>
        }
    }

    server.deploy(config);
</code></pre>
<hr>
<h2 id="extending-the-server">Extending the Server</h2>
<p>If you wish to make a reusable Server Class of your own to share or for some internal use you can always extend the server class and make your own module too.</p>
<pre><code class="lang-javascript">
    <span class="hljs-keyword">const</span> os=<span class="hljs-built_in">require</span>(<span class="hljs-string">'os'</span>);
    <span class="hljs-keyword">const</span> Server=<span class="hljs-built_in">require</span>(<span class="hljs-string">'node-http-server'</span>).Server;

    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyAwesomeServer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Server</span>()</span>{
        <span class="hljs-keyword">constructor</span>(){
            <span class="hljs-keyword">super</span>();
        }

        IP(){
            <span class="hljs-keyword">const</span> networkInterfaces = os.networkInterfaces();
            <span class="hljs-keyword">const</span> serverIPs={};
            <span class="hljs-keyword">const</span> interfaceKeys=<span class="hljs-built_in">Object</span>.keys(networkInterfaces);
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i <span class="hljs-keyword">in</span> interfaceKeys){
                serverIPs[
                    interfaceKeys[i]
                ]={};

                <span class="hljs-keyword">const</span> interface=networkInterfaces[
                    interfaceKeys[i]
                ];

                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j <span class="hljs-keyword">in</span> interface){
                    serverIPs[
                        interfaceKeys[i]
                    ][
                        interface[j].family
                    ]=interface[j].address;
                }
            }

            <span class="hljs-keyword">return</span> serverIPs;
        }
    }

    <span class="hljs-built_in">module</span>.exports=MyAwesomeServer;
</code></pre>
<pre><code class="lang-javascript">
    <span class="hljs-keyword">const</span> AwesomeServer=<span class="hljs-built_in">require</span>(<span class="hljs-string">'MyAwesomeServer'</span>);

    <span class="hljs-keyword">const</span> server=<span class="hljs-keyword">new</span> AwesomeServer;

    server.deploy(
        {
            <span class="hljs-attr">port</span>:<span class="hljs-number">8000</span>,
            <span class="hljs-attr">root</span>:<span class="hljs-string">'~/myAwesomeApp'</span>
        }
    );

    <span class="hljs-built_in">console</span>.log(server.IP);
</code></pre>

            </div><div class="content">
                
            </div>
        </li>
        
    </ul>
</section>
</body>
</html>
