{
  "name": "Node-http-server",
  "tagline": "Simple to use node HTTP Server",
  "body": "Node http server with https and proxy support\r\n================\r\n----\r\n\r\nSimple to use stand alone node HTTP and HTTPS Server you can spin up in seconds.\r\n\r\nSupport for building proxy servers has been added. Documentation coming in next release. [For now see the node-http-server proxy examples](https://github.com/RIAEvangelist/node-http-server/tree/master/example/proxy).\r\n\r\n` npm install node-http-server `\r\n\r\n[![node-http-server stats](https://nodei.co/npm/node-http-server.png?downloads=true&downloadRank=true&stars=true)](https://www.npmjs.com/package/node-http-server)  \r\n\r\nnpm info :  [See npm trends and stats for node-http-server](http://npm-stat.com/charts.html?package=node-http-server&author=&from=&to=)  \r\n![node-http-server npm version](https://img.shields.io/npm/v/node-http-server.svg) ![supported node version for node-http-server](https://img.shields.io/node/v/node-http-server.svg) ![total npm downloads for node-http-server](https://img.shields.io/npm/dt/node-http-server.svg) ![monthly npm downloads for node-http-server](https://img.shields.io/npm/dm/node-http-server.svg) ![npm licence for node-http-server](https://img.shields.io/npm/l/node-http-server.svg)\r\n\r\nGitHub info :  \r\n![node-http-server GitHub Release](https://img.shields.io/github/release/RIAEvangelist/node-http-server.svg) ![GitHub license node-http-server license](https://img.shields.io/github/license/RIAEvangelist/node-http-server.svg) ![open issues for node-http-server on GitHub](https://img.shields.io/github/issues/RIAEvangelist/node-http-server.svg)\r\n\r\nPackage Quality :  \r\n![node-http-server Package Quality](http://npm.packagequality.com/badge/node-http-server.png)\r\n\r\n## writing a node http or https server\r\n\r\nThe below table shows all of the methods available on the server when you require this module.\r\n\r\n```javascript\r\n\r\n    var server=require('node-http-server');\r\n\r\n```\r\n\r\nIf you want to create a custom Server or extend the Server Class you can require just the server class.\r\n\r\n```javascript\r\n\r\n    var Server=require('node-http-server').Server;\r\n\r\n```\r\n\r\n|Server Method| params | description |\r\n|-------------|--------|-------------|\r\n|deploy| config obj (optional) | starts the server. if a config object is passed it will shallow merge it with a clean instantion of the Config class|\r\n|onRequest| request obj | called when request recieved |\r\n|beforeServe|request obj, response obj, body obj, encoding obj| called just before data is served to the client |\r\n|afterServe|request obj| called once data has been fully sent to client |\r\n|Config| config object (optional) | This is a refrence to the Default Config class. Use it to generate a complete config file based off of the default values and arguments passed in when launching the app. Will perform a shallow merge of default values and passed values ig config object passed.|\r\n|Server| none | This is a refrence to the Server Class. Use it to start multiple servers on different ports or to extend the node-http-server.|\r\n\r\n\r\n---\r\n\r\n## Examples\r\n\r\nTo see the node http server in action run ` npm start ` from the root of this repo and then visit [localhost:8000](http://localhost:8000).\r\n\r\nTo start only an https example server ` npm run https ` from the root of this repo and then visit [localhost:4433](http://localhost:4433).\r\n\r\nTo spin up both an http and an https server ` npm run both ` from the root of this repo and then visit [localhost:4433](http://localhost:4433) or [localhost:8000](http://localhost:8000).\r\n\r\nDetailed examples can be found in the [example folder](https://github.com/RIAEvangelist/node-http-server/tree/master/example) The basic example directory is static http and https file servers and the advanced directory has dynamic server side rendering http and https examples including a benchmark example.\r\n\r\n# Basic http server example\r\n\r\n```javascript\r\n\r\n    var server=require('node-http-server');\r\n\r\n    server.deploy(\r\n        {\r\n            port:8000,\r\n            root:'~/myApp/'\r\n        }\r\n    );\r\n\r\n```\r\n\r\n# Basic https only server example\r\n\r\n```javascript\r\n\r\n    var server=require('node-http-server');\r\n\r\n    server.deploy(\r\n        {\r\n            port:8000,\r\n            root:'~/myApp/',\r\n            https:{\r\n                privateKey:`/path/to/your/certs/private/server.key`,\r\n                certificate:`/path/to/your/certs/server.pub`,\r\n                port:4433,\r\n                only:true\r\n            }\r\n        }\r\n    );\r\n\r\n```\r\n\r\n# Basic server running both http and https\r\n\r\n```javascript\r\n\r\n    var server=require('node-http-server');\r\n\r\n    server.deploy(\r\n        {\r\n            port:8000,\r\n            root:'~/myApp/',\r\n            https:{\r\n                privateKey:`/path/to/your/certs/private/server.key`,\r\n                certificate:`/path/to/your/certs/server.pub`,\r\n                port:4433\r\n            }\r\n        }\r\n    );\r\n\r\n```\r\n\r\n---\r\n\r\n## Custom configuration\r\n\r\nfor http :\r\n\r\n```javascript\r\n\r\n    var server=require('node-http-server');\r\n\r\n    var config=new server.Config;\r\n    config.errors['404']    = 'These are not the files you are looking for...';\r\n    config.contentType.mp4  = 'video/mp4';\r\n    config.port             = 8005;\r\n    config.verbose          = true;\r\n    config.root             = '~/myApp/'\r\n\r\n    server.deploy(config);\r\n\r\n```\r\n\r\nfor https :\r\n\r\n```javascript\r\n\r\n    var server=require('node-http-server');\r\n\r\n    var config=new server.Config;\r\n    config.errors['404']    = 'These are not the files you are looking for...';\r\n    config.contentType.mp4  = 'video/mp4';\r\n    config.port             = 8005;\r\n    config.verbose          = true;\r\n    config.root             = '~/myApp/'\r\n    config.https.privateKey = `/path/to/your/certs/private/server.key`;\r\n    config.https.certificate= `/path/to/your/certs/server.pub`;\r\n    config.https.port       = 4433;\r\n    config.https.only       = true;\r\n\r\n    server.deploy(config);\r\n\r\n```\r\n\r\n\r\n---\r\n\r\n## Multiple domains or subdomains\r\n\r\n```javascript\r\n\r\n    var server=require('node-http-server');\r\n\r\n    var config={\r\n        port:8010,\r\n        root:__dirname + '/www/myApp/',\r\n        domain:'myapp.com',\r\n        domains:{\r\n            'a.myapp.com':__dirname+'/www/a-myApp/',\r\n            'yourapp.com':__dirname+'/someFolder/yourApp/'\r\n        }\r\n    }\r\n\r\n    server.deploy(config);    \r\n\r\n```\r\n\r\n## Template filling\r\n\r\n```javascript\r\n\r\n    var server=require('../../server/http.js');\r\n\r\n    server.beforeServe=beforeServe;\r\n\r\n    function beforeServe(request,response,body,encoding){\r\n        //only parsing html files for this example\r\n        if(response.getHeader('Content-Type')!=server.config.contentType.html){\r\n            return;\r\n        }\r\n\r\n        var someVariable='this is some variable value';\r\n\r\n        body.value=body.value.replace('{{someVariable}}',someVariable);\r\n    }\r\n\r\n    server.deploy(\r\n        {\r\n            port:8000,\r\n            root:__dirname+'/appRoot/'\r\n        }\r\n    );\r\n\r\n```\r\n\r\n## Default Node HTTP Server Configuration\r\n\r\n```javascript\r\n\r\n    {\r\n        verbose     : (args.verbose=='true')||false,\r\n        port        : args.port||defaults.port,\r\n        root        : args.root||defaults.root,\r\n        domain      : args.domain||defaults.domain,\r\n        https       :{\r\n            privateKey:'',\r\n            certificate:'',\r\n            port:443,\r\n            only:false\r\n        },\r\n        log         : false,\r\n        logFunction : serverLogging,\r\n        domains   : {\r\n            /*******************\\\r\n             * domain  : /that/domains/root/dir\r\n             *\r\n             * for sub domains, specify the whole host i.e. \"my.sub.domain\"\r\n             * you may need to edit your hosts file, cnames or iptable\r\n             * domain or my.domain etc. goes to 127.0.0.1 for local development\r\n             * *****************/\r\n        },\r\n        server      : {\r\n            index   : args.index||defaults.index,\r\n            noCache : args.noCache=='false' ? false : true,\r\n            timeout : 30000 //30 second timeout\r\n        },\r\n        contentType : {\r\n            html    : 'text/html',\r\n            css     : 'text/css',\r\n            js      : 'text/javascript',\r\n            json    : 'application/json',\r\n            txt     : 'text/plain',\r\n            jpeg    : 'image/jpeg',\r\n            jpg     : 'image/jpeg',\r\n            png     : 'image/png',\r\n            gif     : 'image/gif',\r\n            ico     : 'image/x-icon',\r\n            appcache: 'text/cache-manifest'\r\n        },\r\n        restrictedType: {\r\n\r\n        },\r\n        errors:{\r\n            headers : {\r\n                'Content-Type' : 'text/plain'\r\n            },\r\n            404: '404 MIA',\r\n            415: '415 File type not supported',\r\n            403: '403 Access Denied',\r\n            500: '500 {{err}}'\r\n        }\r\n    };\r\n\r\n```\r\n\r\n\r\n|key|description|\r\n|---|-----|\r\n|verbose| display detailed info about what server is doing via terminal. |\r\n|port| the port on which the server should run  |\r\n|root| the absolute path to the root dir for the domain |\r\n|domain| the server domain. To accept incoming requests for ***ANY Applicable Domain*** use ` 0.0.0.0 ` this will allow any request that is pointed at this machine on the specified port to use this server config.  |\r\n|https|settings for https, these wil only take effect if both a `privateKey` and a `certificate` are specified. Setting ` only ` to be true means the instance will only serve over https|\r\n|log| full path to log file, if specified and the file is not present, it will be created, however the dir must be there. Example path : ` /tmp/server.log ` It is recommended that you timestamp this file name with a time stamp like : ` '~/serverLogs/domain-'+new Date().getTime()+'.log' ` this will create a new log file each time the server is started/restarted/reboot etc...  |\r\n|logFunction| the default function appends timestamps to the headers object and logs as JSON in the ` log ` file. You can assign your own function here as well. It should accepts a javascript Object as the first argument. |\r\n|domains.*| this is a mapping of hostname to path. It can be used for multiple different domains, or for subdomains.|\r\n|server.index| the default file to look for in a dir. if not found a **404** will be displayed   |\r\n|server.noCache| should the server prevent caching    |\r\n|server.timeout| the amount of time allowed for no activity on a connection before it is closed. |\r\n|contentType.*| mapping of file extension to header Content-Type value.  |\r\n|restrictedType.*| extensions to which access will be denied. |\r\n|errors.headers| these are the headers that will automatically be applied to all error responses. You can add custom headers per error in the ` beforeServe ` function |\r\n|errors.*| error headers and error strings, these can be anything you like from html to text etc. The **500** error will replace ` {{err}} ` in the specified value with the actual error message from the server.  |\r\n\r\n\r\n#### config.domains.*\r\n\r\nUse this object for sub domains, or hosting multiple domains on the same port. Specify the whole host i.e. \"my.sub.domain.com\" or \"amazing-domain.com\".\r\n\r\nYou may need to edit your hosts file, cnames, iptable to get this to work on your server or development environment.\r\n\r\nYou can add the below example to your hosts file to run some of the examples from the ` /example/basic ` directory which use multiple domains on occasion.\r\n\r\n    #node-http-server examples\r\n    127.0.0.1 myapp\r\n    127.0.0.1 a.myapp\r\n    127.0.0.1 yourapp.com\r\n\r\n ```javascript\r\n\r\n    var server=require('node-http-server');\r\n\r\n    var config={\r\n        port:8000,\r\n        root:__dirna\\me+'/appRoot/',\r\n        domain:'myapp',\r\n        domains:{\r\n             //subdomain\r\n             'a.myapp':__dirname+'/appSubDomainRoot/',\r\n             //totally different domain, but also on port 8000\r\n             'yourapp.com':__dirname+'/appOtherDomainRoot/'\r\n        }\r\n    }\r\n\r\n    server.deploy(config);\r\n\r\n```\r\n\r\n---\r\n\r\n## Extending the Server\r\n\r\nIf you wish to make a reusable Server Class of your own to share or for some internal use you can always extend the server class and make your own module too.\r\n\r\n```javascript\r\n\r\n    var os=require('os');\r\n    var Server=require('node-http-server').Server;\r\n\r\n   //MyAwesomeServer inherits from Server\r\n   MyAwesomeServer.prototype = new Server;\r\n   //Constructor will extend Server\r\n   MyAwesomeServer.constructor = MyAwesomeServer;\r\n\r\n   function MyAwesomeServer(){\r\n        //extend with some stuff your app needs,\r\n        //maybe npm publish your extention with node-http-server as a dependancy?\r\n        Object.defineProperties(\r\n            this,\r\n            {\r\n                IP:{\r\n                    enumerable:true,\r\n                    get:getIP,\r\n                    //not settable so just return the IP\r\n                    set:getIP\r\n                }\r\n            }\r\n        );\r\n\r\n        //locking down Class structure\r\n        //no willy nilly cowboy coding\r\n        Object.seal(this);\r\n\r\n        function getIP(){\r\n            var networkInterfaces = os.networkInterfaces();\r\n            var serverIPs={};\r\n            var interfaceKeys=Object.keys(networkInterfaces);\r\n            for(var i in interfaceKeys){\r\n                serverIPs[\r\n                    interfaceKeys[i]\r\n                ]={};\r\n\r\n                var interface=networkInterfaces[\r\n                    interfaceKeys[i]\r\n                ];\r\n\r\n                for(var j in interface){\r\n                    serverIPs[\r\n                        interfaceKeys[i]\r\n                    ][\r\n                        interface[j].family\r\n                    ]=interface[j].address;\r\n                }\r\n            }\r\n\r\n            return IPs;\r\n        }\r\n    }\r\n\r\n    module.exports=MyAwesomeServer;\r\n\r\n```\r\n\r\n\r\n```javascript\r\n\r\n    var AwesomeServer=require('MyAwesomeServer');\r\n\r\n    var server=new AwesomeServer;\r\n\r\n    server.deploy(\r\n        {\r\n            port:8000,\r\n            root:'~/myAwesomeApp'\r\n        }\r\n    );\r\n\r\n    console.log(server.IP);\r\n\r\n```\r\n",
  "google": "",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}